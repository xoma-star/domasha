<?php
	function mb_ucfirst($str, $encoding='UTF-8')
	{
		$str = mb_ereg_replace('^[\ ]+', '', $str);
		$str = mb_strtoupper(mb_substr($str, 0, 1, $encoding), $encoding).
			   mb_substr($str, 1, mb_strlen($str), $encoding);
		return $str;
	}
	function get_first_day($year, $month, $week){
		for ($i=0; $i < $week; $i++) {
			$firstweekmonth = date("W", strtotime('1.'.$month.'.'.$year)) + $i - 1;
		}
		return $firstweekmonth * 7 * 86400 + strtotime('1/1/' . $year) - date('w', strtotime('1/1/' . $year)) * 86400 + 86400;
	}
	$config = [
		'study_start'=>'01.09.2019',
		'study_end'=>'01.06.2020',
		'max_week'=>date('W', strtotime('01.06.2020')) // заменить также в подвале get_tables() и timetable.php
	];
	$week = $_GET['w'];
	if (empty($week)) {
		$week = date('W');
	}
	if ($week > $config['max_week']) {
		$year = date('Y', strtotime($config['study_start']));
	}
	else{
		$year = date('Y', strtotime($config['study_end']));
	}
	$first_str = get_first_day($year, 1, $week);

	$day_names = ['Понедельник', 'Вторник', 'Среда', 'Четверг', 'Пятница', 'Суббота'];
	$month_names = ['янв', 'фев', 'мар', 'апр', 'мая', 'июн', 'июл', 'авг', 'сен', 'окт', 'ноя', 'дек'];
	$special_days = ['02.09.2019'];
	$lesson_times = [
		['8:00','9:35'],
		['9:45','11:20'],
		['12:10','13:45'],
		['13:55','15:30'],
		['16:10','17:45'],
		['17:55','19:30'],
		['20:05','21:40']
	];
	$week_data = json_decode(file_get_contents('../hw/'.$week.'.txt'));
	$timetable = json_decode(file_get_contents('../timetable.txt'));

	$sun_data = json_decode(file_get_contents('https://domasha.tk/fc/get_sun_data.php'));

	//include 'log.php';
	//$_POST['user'] = $_GET['user'];
	//loger('get_tables', '');

	for ($i=0; $i < 6; $i++) {
		?>
		<div class="block table-wrap" day-id="<?php echo $i; ?>">
			<h1 class="day-name">
				<a href="?w=<?php echo $week; ?>&d=<?php echo $i; ?>"><?php echo $day_names[$i].', '.date('j', $first_str + $i*24*60*60).' '.$month_names[date('m', $first_str + $i*24*60*60)-1]; ?><img style="visibility: hidden;"></a>
			</h1>
			<div class="notes"><?php
					if (count($week_data->response->days[$i]->notes) > 0) {
						for ($v=0; $v < count($week_data->response->days[$i]->notes); $v++) { 
							echo '<div class="note">'.$week_data->response->days[$i]->notes[$v].'</div>';
						}
					}
				?></div>
			<?php if(!in_array(date('d.m.Y', $first_str + $i*24*60*60), $special_days)){ ?>
				<?php if($week_data->response->days[$i]->weekend == 'false'){ ?>
					<?php if (count($week_data->response->days[$i]->subjects) > 0) { ?>
					<table>
						<tr class="table-header table-row">
							<th class="subject-time-td"><img alt="Время" src="data:image/svg+xml;charset=utf-8,%0D%0A%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2041.301%2041.301%22%20style%3D%22enable-background%3Anew%200%200%2041.301%2041.301%3B%22%20xml%3Aspace%3D%22preserve%22%20width%3D%22512px%22%20height%3D%22512px%22%20class%3D%22%22%3E%3Cg%3E%3Cpath%20d%3D%22M20.642%2C0c5.698%2C0%2C10.857%2C2.317%2C14.602%2C6.047c3.73%2C3.746%2C6.047%2C8.905%2C6.047%2C14.603%20%20c0%2C5.698-2.317%2C10.857-6.047%2C14.603c-3.746%2C3.73-8.904%2C6.047-14.602%2C6.047S9.786%2C38.983%2C6.056%2C35.253%20%20C2.31%2C31.507%2C0.008%2C26.349%2C0.008%2C20.65c0-5.698%2C2.301-10.857%2C6.047-14.603C9.786%2C2.317%2C14.944%2C0%2C20.642%2C0L20.642%2C0z%20M31.166%2C19.523%20%20c0.619%2C0%2C1.111%2C0.508%2C1.111%2C1.127c0%2C0.619-0.492%2C1.127-1.111%2C1.127H20.674h-0.032c-0.413%2C0-0.778-0.238-0.968-0.571l-0.016-0.016%20%20l0%2C0l-0.016-0.032l0%2C0v-0.016l0%2C0l-0.016-0.032l0%2C0l-0.016-0.032l0%2C0v-0.016l0%2C0l-0.016-0.032l0%2C0l-0.016-0.016l0%2C0v-0.032l0%2C0%20%20l-0.016-0.032l0%2C0v-0.016l0%2C0l-0.016-0.032l0%2C0v-0.032l0%2C0v-0.016v-0.016l-0.016-0.016l0%2C0v-0.032l0%2C0v-0.032l0%2C0V20.73l0%2C0v-0.016%20%20l0%2C0v-0.032l0%2C0V20.65l0%2C0V7.206c0-0.619%2C0.492-1.111%2C1.111-1.111c0.619%2C0%2C1.127%2C0.492%2C1.127%2C1.111v12.317H31.166z%20M33.657%2C7.635%20%20c-3.333-3.333-7.936-5.381-13.015-5.381S10.96%2C4.301%2C7.627%2C7.635C4.31%2C10.968%2C2.246%2C15.571%2C2.246%2C20.65%20%20c0%2C5.079%2C2.063%2C9.682%2C5.381%2C13.016c3.333%2C3.333%2C7.936%2C5.381%2C13.015%2C5.381s9.682-2.048%2C13.015-5.381%20%20c3.333-3.333%2C5.397-7.936%2C5.397-13.016C39.054%2C15.571%2C36.991%2C10.968%2C33.657%2C7.635L33.657%2C7.635z%22%20fill%3D%22%23FFFFFF%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%0D%0A"></th>
							<th class="subject-aud-td"><img alt="Аудитория" src="data:image/svg+xml;charset=utf-8,%0D%0A%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%22512px%22%20height%3D%22512px%22%20viewBox%3D%220%200%20492.5%20492.5%22%20style%3D%22enable-background%3Anew%200%200%20492.5%20492.5%3B%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%0D%0A%09%3Cpath%20d%3D%22M184.646%2C0v21.72H99.704v433.358h31.403V53.123h53.539V492.5l208.15-37.422v-61.235V37.5L184.646%2C0z%20M222.938%2C263.129%20%20%20c-6.997%2C0-12.67-7.381-12.67-16.486c0-9.104%2C5.673-16.485%2C12.67-16.485s12.67%2C7.381%2C12.67%2C16.485%20%20%20C235.608%2C255.748%2C229.935%2C263.129%2C222.938%2C263.129z%22%20fill%3D%22%23FFFFFF%22%2F%3E%0D%0A%3C%2Fg%3E%3C%2Fg%3E%0D%0A%3C%2Fsvg%3E%0D%0A"></th>
							<th class="subject-name-td">Предмет<img style="display: none;" alt="Предмет" src="data:image/svg+xml;charset=utf-8,%0D%0A%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20512.004%20512.004%22%20xml%3Aspace%3D%22preserve%22%3E%0D%0A%3Cg%3E%0D%0A%09%3Cg%3E%0D%0A%09%09%3Cg%3E%0D%0A%09%09%09%3Cpath%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22%23fff%22%20d%3D%22M291.057%2C242.811c1.51%2C2.953%2C4.514%2C4.659%2C7.62%2C4.659c1.297%2C0%2C2.628-0.299%2C3.866-0.93%20%20%20%20%20c0.503-0.256%2C50.731-25.771%2C75.503-33.596c4.489-1.425%2C6.98-6.221%2C5.555-10.709c-1.417-4.489-6.178-6.989-10.709-5.572%20%20%20%20%20c-26.095%2C8.252-75.981%2C33.596-78.097%2C34.671C290.596%2C233.467%2C288.924%2C238.605%2C291.057%2C242.811z%22%2F%3E%0D%0A%09%09%09%3Cpath%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22%23fff%22%20d%3D%22M298.677%2C145.071c1.297%2C0%2C2.628-0.299%2C3.866-0.93c0.503-0.256%2C50.731-25.771%2C75.503-33.596%20%20%20%20%20c4.489-1.425%2C6.98-6.221%2C5.555-10.709c-1.417-4.489-6.178-6.989-10.709-5.572c-26.095%2C8.252-75.981%2C33.596-78.097%2C34.671%20%20%20%20%20c-4.198%2C2.133-5.871%2C7.27-3.738%2C11.477C292.567%2C143.364%2C295.571%2C145.071%2C298.677%2C145.071z%22%2F%3E%0D%0A%09%09%09%3Cpath%20d%3D%22M503.469%2C128.004c-4.719%2C0-8.533%2C3.823-8.533%2C8.533v332.8c0%2C14.114-11.486%2C25.6-25.6%2C25.6h-204.8v-19.635%20%20%20%20%20c12.442-4.352%2C44.851-14.498%2C76.8-14.498c74.334%2C0%2C124.809%2C16.461%2C125.312%2C16.631c2.568%2C0.853%2C5.436%2C0.427%2C7.68-1.178%20%20%20%20%20c2.227-1.604%2C3.541-4.181%2C3.541-6.921V93.871c0-4.002-2.773-7.467-6.682-8.329c0%2C0-6.69-1.493-18.125-3.593%20%20%20%20%20c-4.617-0.853-9.079%2C2.219-9.933%2C6.844c-0.853%2C4.642%2C2.21%2C9.088%2C6.844%2C9.941c4.361%2C0.802%2C8.013%2C1.51%2C10.829%2C2.074v357.188%20%20%20%20%20c-19.337-5.069-62.276-14.259-119.467-14.259c-37.18%2C0-73.702%2C12.211-85.001%2C16.35c-10.044-4.437-40.405-16.35-77.133-16.35%20%20%20%20%20c-58.778%2C0-107.196%2C9.694-128%2C14.618V100.475c17.041-4.19%2C67.371-15.138%2C128-15.138c31.113%2C0%2C57.796%2C9.685%2C68.267%2C14.063v335.804%20%20%20%20%20c0%2C3.072%2C1.655%2C5.914%2C4.326%2C7.424c2.671%2C1.519%2C5.965%2C1.476%2C8.602-0.111c0.845-0.503%2C85.393-51.004%2C160.435-76.015%20%20%20%20%20c3.49-1.169%2C5.837-4.42%2C5.837-8.098V8.537c0-2.799-1.374-5.419-3.678-7.014c-2.287-1.596-5.222-1.963-7.859-0.981%20%20%20%20%20C346.856%2C26.15%2C277.771%2C69.141%2C277.079%2C69.568c-3.994%2C2.5-5.214%2C7.765-2.714%2C11.759c2.492%2C3.994%2C7.757%2C5.214%2C11.759%2C2.714%20%20%20%20%20c0.631-0.401%2C60.732-37.794%2C123.477-63.027v331.281c-58.249%2C20.241-119.066%2C53.291-145.067%2C68.087V93.871%20%20%20%20%20c0-3.234-1.826-6.187-4.719-7.637c-1.468-0.725-36.437-17.963-80.614-17.963c-77.107%2C0-136.388%2C16.683-138.88%2C17.399%20%20%20%20%20c-3.661%2C1.041-6.187%2C4.395-6.187%2C8.201v375.467c0%2C2.671%2C1.263%2C5.197%2C3.388%2C6.81c1.502%2C1.135%2C3.311%2C1.724%2C5.146%2C1.724%20%20%20%20%20c0.785%2C0%2C1.57-0.111%2C2.338-0.333c0.589-0.162%2C59.597-16.734%2C134.195-16.734c31.198%2C0%2C57.856%2C9.711%2C68.267%2C14.071v20.062h-204.8%20%20%20%20%20c-14.114%2C0-25.6-11.486-25.6-25.6v-332.8c0-4.71-3.823-8.533-8.533-8.533s-8.533%2C3.823-8.533%2C8.533v332.8%20%20%20%20%20c0%2C23.526%2C19.14%2C42.667%2C42.667%2C42.667h426.667c23.526%2C0%2C42.667-19.14%2C42.667-42.667v-332.8%20%20%20%20%20C512.002%2C131.827%2C508.188%2C128.004%2C503.469%2C128.004z%22%20fill%3D%22%23fff%22%2F%3E%0D%0A%09%09%09%3Cpath%20d%3D%22M291.057%2C191.611c1.51%2C2.953%2C4.514%2C4.659%2C7.62%2C4.659c1.297%2C0%2C2.628-0.299%2C3.866-0.93%20%20%20%20%20c0.503-0.256%2C50.731-25.771%2C75.503-33.596c4.489-1.425%2C6.98-6.221%2C5.555-10.709c-1.417-4.489-6.178-6.989-10.709-5.572%20%20%20%20%20c-26.095%2C8.252-75.981%2C33.596-78.097%2C34.671C290.596%2C182.267%2C288.924%2C187.405%2C291.057%2C191.611z%22%20fill%3D%22%23fff%22%2F%3E%0D%0A%09%09%09%3Cpath%20d%3D%22M291.057%2C294.011c1.51%2C2.953%2C4.514%2C4.659%2C7.62%2C4.659c1.297%2C0%2C2.628-0.299%2C3.866-0.93%20%20%20%20%20c0.503-0.256%2C50.731-25.771%2C75.503-33.596c4.489-1.425%2C6.98-6.221%2C5.555-10.709c-1.417-4.489-6.178-6.989-10.709-5.572%20%20%20%20%20c-26.095%2C8.252-75.981%2C33.596-78.097%2C34.671C290.596%2C284.667%2C288.924%2C289.805%2C291.057%2C294.011z%22%20fill%3D%22%23fff%22%2F%3E%0D%0A%09%09%09%3Cpath%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22%23fff%22%20d%3D%22M206.748%2C158.366c-52.693-12.365-112.572%2C3.388-115.089%2C4.062c-4.548%2C1.22-7.253%2C5.896-6.033%2C10.453%20%20%20%20%20c1.024%2C3.814%2C4.471%2C6.323%2C8.235%2C6.323c0.734%2C0%2C1.476-0.094%2C2.219-0.29c0.572-0.162%2C58.223-15.326%2C106.778-3.934%20%20%20%20%20c4.565%2C1.067%2C9.182-1.775%2C10.257-6.366C214.189%2C164.032%2C211.339%2C159.441%2C206.748%2C158.366z%22%2F%3E%0D%0A%09%09%09%3Cpath%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22%23fff%22%20d%3D%22M206.748%2C209.566c-52.693-12.356-112.572%2C3.388-115.089%2C4.062c-4.548%2C1.22-7.253%2C5.897-6.033%2C10.453%20%20%20%20%20c1.024%2C3.814%2C4.471%2C6.323%2C8.235%2C6.323c0.734%2C0%2C1.476-0.094%2C2.219-0.29c0.572-0.162%2C58.223-15.326%2C106.778-3.934%20%20%20%20%20c4.565%2C1.067%2C9.182-1.775%2C10.257-6.366C214.189%2C215.232%2C211.339%2C210.641%2C206.748%2C209.566z%22%2F%3E%0D%0A%09%09%09%3Cpath%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22%23fff%22%20d%3D%22M291.057%2C345.211c1.51%2C2.953%2C4.514%2C4.659%2C7.62%2C4.659c1.297%2C0%2C2.628-0.299%2C3.866-0.93%20%20%20%20%20c0.503-0.256%2C50.731-25.771%2C75.503-33.596c4.489-1.425%2C6.98-6.221%2C5.555-10.709c-1.417-4.488-6.178-6.989-10.709-5.572%20%20%20%20%20c-26.095%2C8.252-75.981%2C33.596-78.097%2C34.671C290.596%2C335.867%2C288.924%2C341.005%2C291.057%2C345.211z%22%2F%3E%0D%0A%09%09%09%3Cpath%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22%23fff%22%20d%3D%22M206.748%2C260.766c-52.693-12.356-112.572%2C3.379-115.089%2C4.062c-4.548%2C1.22-7.253%2C5.897-6.033%2C10.453%20%20%20%20%20c1.024%2C3.814%2C4.471%2C6.332%2C8.235%2C6.332c0.734%2C0%2C1.476-0.102%2C2.219-0.299c0.572-0.162%2C58.223-15.326%2C106.778-3.934%20%20%20%20%20c4.565%2C1.067%2C9.182-1.775%2C10.257-6.366C214.189%2C266.432%2C211.339%2C261.841%2C206.748%2C260.766z%22%2F%3E%0D%0A%09%09%09%3Cpath%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22%23fff%22%20d%3D%22M206.748%2C363.166c-52.693-12.365-112.572%2C3.388-115.089%2C4.062c-4.548%2C1.22-7.253%2C5.897-6.033%2C10.453%20%20%20%20%20c1.024%2C3.814%2C4.471%2C6.332%2C8.235%2C6.332c0.734%2C0%2C1.476-0.102%2C2.219-0.299c0.572-0.162%2C58.223-15.326%2C106.778-3.934%20%20%20%20%20c4.565%2C1.058%2C9.182-1.775%2C10.257-6.366C214.189%2C368.832%2C211.339%2C364.241%2C206.748%2C363.166z%22%2F%3E%0D%0A%09%09%09%3Cpath%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22%23fff%22%20d%3D%22M206.748%2C311.966c-52.693-12.365-112.572%2C3.379-115.089%2C4.062c-4.548%2C1.22-7.253%2C5.897-6.033%2C10.453%20%20%20%20%20c1.024%2C3.814%2C4.471%2C6.332%2C8.235%2C6.332c0.734%2C0%2C1.476-0.102%2C2.219-0.299c0.572-0.162%2C58.223-15.326%2C106.778-3.934%20%20%20%20%20c4.565%2C1.067%2C9.182-1.775%2C10.257-6.366C214.189%2C317.632%2C211.339%2C313.041%2C206.748%2C311.966z%22%2F%3E%0D%0A%09%09%3C%2Fg%3E%0D%0A%09%3C%2Fg%3E%0D%0A%3C%2Fg%3E%0D%0A%3C%2Fsvg%3E%0D%0A"></th>
							<th class="subject-data-td"></th>
						</tr>
						<?php
						for ($z=0; $z < count($week_data->response->days[$i]->subjects); $z++) {
							if (empty($timetable->response[$i][$z]) || !empty($week_data->response->days[$i]->subjects[$z]->name) && ($timetable->response[$i][$z] != $week_data->response->days[$i]->subjects[$z]->name)) {
								//$name = '<span title="Замена">!</span>'.mb_ucfirst($week_data->response->days[$i]->subjects[$z]->name);
								$name = ($week_data->response->days[$i]->subjects[$z]->name);
								if ($k == 0) {
									if ($week_data->response->days[$i]->subjects[$z]->name != $timetable->response[$i][$z]) {
										$k++;
										//echo "<script id=\"script_remove\">$('[day-id=".$i."]').children('.notes').append('<div class=\"note\">Замены в расписании</div>');$('#script_remove').remove()</script>";
									}
									else{
										$name = $timetable->response[$i][$z];
									}
								}
							}
							else{
								$name = $timetable->response[$i][$z];
							}
							?>
							<tr lesson="<?php echo $z; ?>" class="table-row<?php if($z == (count($week_data->response->days[$i]->subjects)-1)) {echo ' no-border-bottom';}?>">
								<th><?php echo $lesson_times[$z][0].'-'.$lesson_times[$z][1]; ?></th>
								<th><?php echo $week_data->response->days[$i]->subjects[$z]->aud; ?></th>
								<th class="th-subject-name"><?php
									//echo mb_ucfirst($week_data->response->days[$i]->subjects[$z]->type).' по '.($name);
								if ($name == '---') {
									echo mb_ucfirst($name);
								}
								else{
									echo mb_ucfirst($name).' ('.$week_data->response->days[$i]->subjects[$z]->type.')';
								}
								?></th>
								<th><?php //echo $week_data->response->days[$i]->subjects[$z]->hw;
								if ((count($week_data->response->days[$i]->subjects[$z]->docs) + count($week_data->response->days[$i]->subjects[$z]->images)) > 0) {
									?>
									<a href="?w=<?php echo $week; ?>&d=<?php echo $i; ?>&l=<?php echo $z; ?>"><img alt="Есть вложения" src="data:image/svg+xml;charset=utf-8,%0D%0A%3Csvg%20version%3D%221.1%22%20id%3D%22Capa_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%0D%0A%09%20viewBox%3D%220%200%2058%2058%22%20style%3D%22enable-background%3Anew%200%200%2058%2058%3B%22%20xml%3Aspace%3D%22preserve%22%3E%0D%0A%3Cpolygon%20style%3D%22fill%3A%237383BF%3B%22%20points%3D%2220%2C3.5%2025%2C10.5%2058%2C10.5%2058%2C3.5%20%22%2F%3E%0D%0A%3Cpolygon%20style%3D%22fill%3A%23424A60%3B%22%20points%3D%2225%2C10.5%2020%2C3.5%200%2C3.5%200%2C10.5%200%2C54.5%2058%2C54.5%2058%2C17.5%2030%2C17.5%20%22%2F%3E%0D%0A%3Cpolygon%20style%3D%22fill%3A%2371C3A9%3B%22%20points%3D%2230%2C17.5%2058%2C17.5%2058%2C10.5%2025%2C10.5%20%22%2F%3E%0D%0A%3Cg%3E%0D%0A%09%3Cpath%20style%3D%22fill%3A%237383BF%3B%22%20d%3D%22M18%2C29.5h14c0.552%2C0%2C1-0.447%2C1-1s-0.448-1-1-1H18c-0.552%2C0-1%2C0.447-1%2C1S17.448%2C29.5%2C18%2C29.5z%22%2F%3E%0D%0A%09%3Cpath%20style%3D%22fill%3A%237383BF%3B%22%20d%3D%22M18%2C35.5h22c0.552%2C0%2C1-0.447%2C1-1s-0.448-1-1-1H18c-0.552%2C0-1%2C0.447-1%2C1S17.448%2C35.5%2C18%2C35.5z%22%2F%3E%0D%0A%09%3Cpath%20style%3D%22fill%3A%237383BF%3B%22%20d%3D%22M40%2C39.5H18c-0.552%2C0-1%2C0.447-1%2C1s0.448%2C1%2C1%2C1h22c0.552%2C0%2C1-0.447%2C1-1S40.552%2C39.5%2C40%2C39.5z%22%2F%3E%0D%0A%3C%2Fg%3E%0D%0A%3C%2Fsvg%3E%0D%0A" class="includes right"></a>
									<?php
								}

								?><a href="?w=<?php echo $week; ?>&d=<?php echo $i; ?>&l=<?php echo $z; ?>"><img alt="Подробнее" src="data:image/svg+xml;charset=utf-8,%0D%0A%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%0D%0A%09%20viewBox%3D%220%200%20512%20512%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20xml%3Aspace%3D%22preserve%22%3E%0D%0A%3Cg%3E%0D%0A%09%3Cpath%20style%3D%22fill%3A%23FFFFFF%3B%22%20d%3D%22M131.879%2C248.242c-4.278%2C0-7.758%2C3.48-7.758%2C7.758c0%2C4.278%2C3.48%2C7.758%2C7.758%2C7.758%0D%0A%09%09c4.278%2C0%2C7.758-3.48%2C7.758-7.758C139.636%2C251.722%2C136.156%2C248.242%2C131.879%2C248.242z%22%2F%3E%0D%0A%09%3Cpath%20style%3D%22fill%3A%23FFFFFF%3B%22%20d%3D%22M131.879%2C217.212c-21.388%2C0-38.788%2C17.4-38.788%2C38.788s17.4%2C38.788%2C38.788%2C38.788%0D%0A%09%09s38.788-17.4%2C38.788-38.788S153.266%2C217.212%2C131.879%2C217.212z%20M131.879%2C271.515c-8.569%2C0-15.515-6.946-15.515-15.515%0D%0A%09%09c0-8.569%2C6.946-15.515%2C15.515-15.515c8.567%2C0%2C15.515%2C6.946%2C15.515%2C15.515C147.394%2C264.569%2C140.446%2C271.515%2C131.879%2C271.515z%22%2F%3E%0D%0A%09%3Cpath%20style%3D%22fill%3A%23FFFFFF%3B%22%20d%3D%22M131.879%2C240.485c-8.569%2C0-15.515%2C6.946-15.515%2C15.515c0%2C8.569%2C6.946%2C15.515%2C15.515%2C15.515%0D%0A%09%09c8.567%2C0%2C15.515-6.946%2C15.515-15.515C147.394%2C247.431%2C140.446%2C240.485%2C131.879%2C240.485z%20M131.879%2C263.758%0D%0A%09%09c-4.278%2C0-7.758-3.48-7.758-7.758c0-4.278%2C3.48-7.758%2C7.758-7.758c4.278%2C0%2C7.758%2C3.48%2C7.758%2C7.758%0D%0A%09%09C139.636%2C260.278%2C136.156%2C263.758%2C131.879%2C263.758z%22%2F%3E%0D%0A%09%3Cpath%20style%3D%22fill%3A%23FFFFFF%3B%22%20d%3D%22M256%2C248.242c-4.278%2C0-7.758%2C3.48-7.758%2C7.758c0%2C4.278%2C3.48%2C7.758%2C7.758%2C7.758%0D%0A%09%09c4.278%2C0%2C7.758-3.48%2C7.758-7.758C263.758%2C251.722%2C260.278%2C248.242%2C256%2C248.242z%22%2F%3E%0D%0A%09%3Cpath%20style%3D%22fill%3A%23FFFFFF%3B%22%20d%3D%22M256%2C217.212c-21.388%2C0-38.788%2C17.4-38.788%2C38.788s17.4%2C38.788%2C38.788%2C38.788%0D%0A%09%09s38.788-17.4%2C38.788-38.788S277.388%2C217.212%2C256%2C217.212z%20M256%2C271.515c-8.569%2C0-15.515-6.946-15.515-15.515%0D%0A%09%09c0-8.569%2C6.946-15.515%2C15.515-15.515c8.569%2C0%2C15.515%2C6.946%2C15.515%2C15.515C271.515%2C264.569%2C264.569%2C271.515%2C256%2C271.515z%22%2F%3E%0D%0A%09%3Cpath%20style%3D%22fill%3A%23FFFFFF%3B%22%20d%3D%22M256%2C240.485c-8.569%2C0-15.515%2C6.946-15.515%2C15.515c0%2C8.569%2C6.946%2C15.515%2C15.515%2C15.515%0D%0A%09%09c8.569%2C0%2C15.515-6.946%2C15.515-15.515C271.515%2C247.431%2C264.569%2C240.485%2C256%2C240.485z%20M256%2C263.758c-4.278%2C0-7.758-3.48-7.758-7.758%0D%0A%09%09c0-4.278%2C3.48-7.758%2C7.758-7.758c4.278%2C0%2C7.758%2C3.48%2C7.758%2C7.758C263.758%2C260.278%2C260.278%2C263.758%2C256%2C263.758z%22%2F%3E%0D%0A%09%3Cpath%20style%3D%22fill%3A%23FFFFFF%3B%22%20d%3D%22M372.364%2C256c0%2C4.278%2C3.48%2C7.758%2C7.758%2C7.758c4.278%2C0%2C7.758-3.48%2C7.758-7.758%0D%0A%09%09c0-4.278-3.48-7.758-7.758-7.758C375.844%2C248.242%2C372.364%2C251.722%2C372.364%2C256z%22%2F%3E%0D%0A%09%3Cpath%20style%3D%22fill%3A%23FFFFFF%3B%22%20d%3D%22M341.333%2C256c0%2C21.388%2C17.4%2C38.788%2C38.788%2C38.788c21.388%2C0%2C38.788-17.4%2C38.788-38.788%0D%0A%09%09s-17.4-38.788-38.788-38.788C358.734%2C217.212%2C341.333%2C234.612%2C341.333%2C256z%20M395.636%2C256c0%2C8.569-6.946%2C15.515-15.515%2C15.515%0D%0A%09%09c-8.569%2C0-15.515-6.946-15.515-15.515c0-8.569%2C6.946-15.515%2C15.515-15.515C388.69%2C240.485%2C395.636%2C247.431%2C395.636%2C256z%22%2F%3E%0D%0A%09%3Cpath%20style%3D%22fill%3A%23FFFFFF%3B%22%20d%3D%22M364.606%2C256c0%2C8.569%2C6.946%2C15.515%2C15.515%2C15.515c8.569%2C0%2C15.515-6.946%2C15.515-15.515%0D%0A%09%09c0-8.569-6.946-15.515-15.515-15.515C371.552%2C240.485%2C364.606%2C247.431%2C364.606%2C256z%20M387.879%2C256c0%2C4.278-3.48%2C7.758-7.758%2C7.758%0D%0A%09%09c-4.278%2C0-7.758-3.48-7.758-7.758c0-4.278%2C3.48-7.758%2C7.758-7.758C384.399%2C248.242%2C387.879%2C251.722%2C387.879%2C256z%22%2F%3E%0D%0A%3C%2Fg%3E%0D%0A%3Cpath%20style%3D%22fill%3A%23719DF7%3B%22%20d%3D%22M256%2C0v217.212c21.388%2C0%2C38.788%2C17.4%2C38.788%2C38.788s-17.4%2C38.788-38.788%2C38.788V512%0D%0A%09c141.158%2C0%2C256-114.842%2C256-256S397.158%2C0%2C256%2C0z%20M380.121%2C294.788c-21.388%2C0-38.788-17.4-38.788-38.788s17.4-38.788%2C38.788-38.788%0D%0A%09c21.388%2C0%2C38.788%2C17.4%2C38.788%2C38.788S401.509%2C294.788%2C380.121%2C294.788z%22%2F%3E%0D%0A%3Cpath%20style%3D%22fill%3A%233D6DEB%3B%22%20d%3D%22M217.212%2C256c0-21.388%2C17.4-38.788%2C38.788-38.788V0C114.842%2C0%2C0%2C114.842%2C0%2C256s114.842%2C256%2C256%2C256%0D%0A%09V294.788C234.612%2C294.788%2C217.212%2C277.388%2C217.212%2C256z%20M131.879%2C294.788c-21.388%2C0-38.788-17.4-38.788-38.788%0D%0A%09s17.4-38.788%2C38.788-38.788s38.788%2C17.4%2C38.788%2C38.788S153.266%2C294.788%2C131.879%2C294.788z%22%2F%3E%0D%0A%3C%2Fsvg%3E%0D%0A%0D%0A" class="row-more right"></a></th>
							</tr>
							<?php
						}
						?>
					</table>
					<?php }else{ ?>
					<div class="weekend">
						<h2>Нет расписания</h2>
						<img src="img/emoji/animated/grimacing_face.gif" alt="Нет расписания" style="display: none;" onload="$(this).show();$(this).parent().children('svg').hide();">
						<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="38px" height="38px" style="margin: 3px 0 -8px;" preserveAspectRatio="xMidYMid meet" viewBox="0 0 36 36"><path fill="#FFCC4D" d="M36 18c0 9.941-8.059 18-18 18-9.94 0-18-8.059-18-18C0 8.06 8.06 0 18 0c9.941 0 18 8.06 18 18"/><ellipse fill="#664500" cx="12" cy="13.5" rx="2.5" ry="3.5"/><ellipse fill="#664500" cx="24" cy="13.5" rx="2.5" ry="3.5"/><path fill="#FFF" d="M25 21a4 4 0 0 1 0 8H11a4 4 0 0 1 0-8h14z"/><path fill="#664500" d="M25 20H11c-2.757 0-5 2.243-5 5s2.243 5 5 5h14c2.757 0 5-2.243 5-5s-2.243-5-5-5zm0 2a2.997 2.997 0 0 1 2.949 2.5H24.5V22h.5zm-1.5 0v2.5h-3V22h3zm-4 0v2.5h-3V22h3zm-4 0v2.5h-3V22h3zM11 22h.5v2.5H8.051A2.997 2.997 0 0 1 11 22zm0 6a2.997 2.997 0 0 1-2.949-2.5H11.5V28H11zm1.5 0v-2.5h3V28h-3zm4 0v-2.5h3V28h-3zm4 0v-2.5h3V28h-3zm4.5 0h-.5v-2.5h3.449A2.997 2.997 0 0 1 25 28z"/></svg>
					</div>
					<?php } ?>
				<?php }else{ ?>
				<div class="weekend">
					<h2>Не учимся</h2>
					<img src="img/emoji/animated/party_face.gif" alt="Не учимся" style="display: none;" onload="$(this).show();$(this).parent().children('svg').hide();">
					<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="38px" height="38px" style="margin: 3px 0 -8px;" preserveAspectRatio="xMidYMid meet" viewBox="0 0 36 36"><circle fill="#FFCC4D" cx="17" cy="19" r="17"/><ellipse fill="#664500" cx="17.999" cy="26" rx="2" ry="2.5"/><path fill="#664500" d="M8.111 21.383a1 1 0 0 1-.845-1.533c.916-1.453 3.701-3.938 7.69-2.962a1 1 0 0 1-.476 1.942c-3.604-.882-5.502 2.056-5.521 2.086a1.001 1.001 0 0 1-.848.467zm11.973-3.742a1 1 0 0 1-.634-1.774c3.176-2.604 6.762-1.562 8.215-.646a1 1 0 0 1-1.064 1.694c-.138-.084-3.052-1.823-5.884.499a.992.992 0 0 1-.633.227z"/><path fill="#E2A62D" d="M13.346 31.273a.75.75 0 0 1-.722-.954c.437-1.54.258-3.029-.49-4.086-.497-.702-1.205-1.131-1.943-1.178-.414-.025-.728-.382-.702-.795s.381-.751.795-.701c1.193.074 2.313.733 3.073 1.807 1.011 1.429 1.27 3.383.709 5.361a.749.749 0 0 1-.72.546zm11.037-3.061a.744.744 0 0 1-.412-.124c-1.167-.77-1.82-2.117-1.792-3.695.029-1.635.809-3.153 1.984-3.869a.748.748 0 0 1 1.03.251.748.748 0 0 1-.251 1.03c-.735.448-1.244 1.499-1.264 2.614-.02 1.055.389 1.936 1.118 2.417a.75.75 0 0 1-.413 1.376z"/><path fill="#DD2E44" d="M17.179 2.72a.325.325 0 0 0-.189-.091S1.066-.394.377.214C-.311.823.74 16.998.74 16.998c.005.081.023.15.067.199.604.684 4.758-2.004 9.279-6.001 4.522-3.998 7.697-7.792 7.093-8.476z"/><path fill="#EA596E" d="M.349.271a.486.486 0 0 0-.038.123C.47 1.765 2.006 13.046 2.963 16.572c1.436-.803 2.895-1.894 4.609-3.253C6.116 10.654 1.158.146.349.271z"/><path fill="#3B88C3" d="M29.902 29.229l-10.573-1.303c-1.13-.102-3.117-.112-3.015-1.902.093-1.623 2.04-1.373 3.479-1.16l10.638 1.774-.529 2.591z"/><path fill="#88C9F9" d="M30.43 26.639l-4.222-.724c-.494-.089-.934.647-.956 1.426-.025.866.227 1.304.726 1.406l4.144.512.308-2.62z"/><path fill="#3B88C3" d="M34.918 26.341l-2.622 2.411-4.687-5.097 2.622-2.411a3.372 3.372 0 0 1 4.751.199l.135.147a3.373 3.373 0 0 1-.199 4.751z"/><ellipse transform="rotate(-42.597 29.954 26.205)" fill="#88C9F9" cx="29.952" cy="26.203" rx="2.77" ry="3.462"/><ellipse transform="rotate(-42.597 29.954 26.205)" fill="#269" cx="29.952" cy="26.203" rx="1.385" ry="2.077"/><circle fill="#55ACEE" cx="2.5" cy="33.5" r="1.5"/><circle fill="#55ACEE" cx="29" cy="2" r="2"/><path fill="#EA596E" d="M4.864 29.246L2.526 23.63.412 29.675zM26 5l-4 1 1-4z"/><path fill="#77B255" d="M31.999 13L36 7.999 33 6z"/></svg>
				</div>
				<?php } ?>
			<?php }else{include 'special_days.php';} ?>
		</div>
		<?php
		$k=0;
	}
?>
<a rel="noopener" href="https://fozzy.com/aff.php?aff=16137" target="_blank" style="text-decoration: none;" id="promo">
	<div class="block table-wrap">
		<h1 id="fozzy-promo-text">Используй промокод DOMASHA и получи скидку 10%</h1>
		<div id="fozzy-promo"></div>
	</div>
<script>
	var params = window
	.location
	.search
	.replace('?','')
	.split('&')
	.reduce(
	function(p,e){
	    var a = e.split('=');
	    p[ decodeURIComponent(a[0])] = decodeURIComponent(a[1]);
	    return p;
	},
	{}
);
	check_weather();
	$('#sun-night').attr('sunset', '<?php echo $sun_data->sunset; ?>').attr('sunrise', '<?php echo $sun_data->sunrise; ?>');
	check_night();
</script>